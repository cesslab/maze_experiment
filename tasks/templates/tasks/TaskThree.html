{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Task 3
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'tasks/task3.css' %}">
{% endblock %}

{% block content %}
    <div>
        <p>
            Bag A contains 10 red and 10 blue chips. We drew one chip from the bag and recorded the extracted color.
            By choosing one of the buttons bellow bet on the color of the chip that has been extracted from the bags.
        </p>
    </div>
    <div class="btn-container">
        <div class="text-center" id="ab-selection">
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-danger" id="left_button">
                    <input type="radio" name="task_three_bet" id="option1" value="1" autocomplete="off">
                    I bet on red color
                </label>
                <label class="btn btn-primary" id="right_button">
                    <input type="radio" name="task_three_bet" id="option2" value="2" autocomplete="off">
                    I bet on blue color
                </label>
            </div>
        </div>
        <div id="bid-message" class="hidden align-middle">
            <h3 class="text-center" id="bid-red">You bet on red</h3>
            <h3 class="text-center" id="bid-blue">You bet on blue</h3>
        </div>
    </div>

    <div>
        <p>
            The choice you made above defines <b>your gamble</b>. If the color extracted from bag A was the color you
            placed your bet on, you win 4 dollars, if we extracted the other color you win 0 dollars.
            Next you are presented with a list of questions where you have the option to trade your gamble for a
            sure payment.
        </p>
        <p>
            If this task is chosen for payment one of your 10 choices will be selected for payment.
        </p>
    </div>

    <div>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Case</th>
                <th>Option A</th>
                <th>Option B</th>
                <th>A or B</th>
            </tr>
            </thead>
            <tbody>
            {% for case in cases %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>Your Gamble</td>
                    <td>{{ case|c }}</td>
                    <td>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-secondary left-pair ab-btn" id="a_row_{{ forloop.counter }}">
                                <input type="radio" value="1" name="task_three_{{ forloop.counter }}" autocomplete="off">A
                            </label>
                            <label class="btn btn-secondary ab-btn" id="b_row_{{ forloop.counter }}">
                                <input type="radio" value="2" name="task_three_{{ forloop.counter }}" autocomplete="off">B
                            </label>
                        </div>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>


    {% next_button %}

{% endblock %}

{% block scripts %}
    <script>
        $('#ab-selection :input').change(function(){
            let betId = parseInt(this.value);
            if (betId === 1) {
                $('#bid-message').removeClass('hidden');
                $('#bid-red').show();
                $('#bid-blue').hide();
                console.log('bet on red');
            }
            else {
                $('#bid-message').removeClass('hidden');
                $('#bid-red').hide();
                $('#bid-blue').show();
                console.log('bet on blue');
            }
        });
    </script>

{% endblock %}
