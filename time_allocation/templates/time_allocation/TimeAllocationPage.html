{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'time_allocation/allocation.css' %}">
{% endblock %}

{% block content %}
    <div class="grid-container">
        <div>
            {% include 'preference/lottery_template.html' with op="V" high=l.high_prize low=l.low_prize rate=l.completion_rate p_high=l.prob_high_completed p_low=l.prob_low_incomplete %}
        </div>
        <div>
            {% include 'preference/lottery_template.html' with op="W" high=r.high_prize low=r.low_prize rate=r.completion_rate p_high=r.prob_high_completed p_low=r.prob_low_incomplete %}
        </div>
    </div>
    <div class="grid-container">
        <div>
            <input
                    type="number"
                    onkeyup="return updateRightLotteryAllocation(this,event);"
                    id="left_lottery_time"
                    name="left_lottery_time"
                    class="center-input form-control"
                    value="{{ form.left_lottery_time.value|default_if_none:"" }}"
                    placeholder="Enter Time for V" required>

            <small id="help" class="form-text text-muted">Your the time you would like to spend on V
            </small>
            {% if form.left_lottery_time.errors %}
                <div class="alert alert-danger">
                    {{ form.left_lottery_time.errors }}
                </div>
            {% endif %}
        </div>

        <div>
            <input
                    type="number"
                    id="right_lottery_time"
                    name="right_lottery_time"
                    placeholder="Enter Time for W" required
                    class="center-input form-control"
            >
        </div>
    </div>

    {% next_button %}

{% endblock %}

{% block scripts %}
    <script>
    document.getElementById().addEventListener('keyup', (event) => {
      const keyName = event.key;

      // As the user releases the Ctrl key, the key is no longer active,
      // so event.ctrlKey is false.
      if (keyName === 'Control') {
        alert('Control key was released');
      }
    }, false);
        function updateRightLotteryAllocation(el, evt) {
            let maxAllocation = 60;
            let input = document.getElementById('left_lottery_time').value;
            if (input) {
                let leftAllocation = parseInt(input);
                document.getElementById('right_lottery_time').value = maxAllocation - leftAllocation;
            }
        }

    </script>
{% endblock %}
